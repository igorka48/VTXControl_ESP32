Це **PlatformIO-сумісний форк** ESP32-порту бібліотеки **VTXControl** від EY3G0R3,  
яка, у свою чергу, є форком оригінальної бібліотеки VTXControl від RandyReover.

Оскільки бібліотеки **SoftwareSerial** для ESP32 відрізняються від AVR-версій,  
клас `SoftwareSerialAdapter` збережено, щоб мінімізувати інвазивні зміни.

# VTXControl
Arduino-бібліотека для керування відеопередавачем (VTX) за протоколами **SmartAudio** та **Tramp**.

Цей C/C++‑код використовує модифіковану бібліотеку **SoftwareSerialWithHalfDuplex**  
(частково взято з CustomSoftwareSerial для підтримки різних конфігурацій UART, зокрема 8N2).  
Деякі фрагменти запозичені з **BetaFlight** та **ArduPilot** (підтримка протоколів SmartAudio і Tramp).

Бібліотека дозволяє керувати функціями VTX (перемикання потужності та каналів/частот)  
програмно через Arduino‑сумісні системи або роботів.

VTXControl працює в одному з двох режимів — **SmartAudio** чи **Tramp**.  
Обмін із VTX ведеться через програмний послідовний порт (*SoftwareSerialWithHalfDuplex*).

Бібліотеку протестовано з такими передавачами:

* **Eachine TX5258** (SmartAudio v2)  
* **JHEMCU RuiBet Tran3016W** (Tramp)

Тому це не універсальне рішення — ваш VTX може мати власну реалізацію протоколу.

> **Підтримка PitMode та GetTemperature наразі відсутня,**  
> але ви можете додати ці функції самостійно.

Перегляньте масиви **powers** і **freqs** у *VTXControl.cpp*  
та за потреби відкоригуйте їх під свій передавач.

## Приклад найпростішого створення інстансу

<details>
<summary>SmartAudio</summary>

```cpp
VTXControl* vtx;
vtx = new VTXControl(VTXMode::SmartAudio, 53, 500, false);
```
</details>

<details>
<summary>Tramp</summary>

```cpp
VTXControl* vtx;
vtx = new VTXControl(VTXMode::Tramp, 53, 500, false);
```
</details>

---

### Примітка

Головна проблема взаємодії VTXControl із різними передавачами полягає у різних (іноді некоректних) реалізаціях SmartAudio/Tramp виробниками VTX.  
Скористайтесь проєктом **VTX_Test** для діагностики: надсилайте команди, аналізуйте відповіді, експериментуйте з бітрейтом, перевіряйте наявність/відсутність нульових байтів на початку чи в кінці пакетів, ігноруйте або враховуйте CRC, щоб досягти коректної роботи з власним VTX.

#### Примітка 1
Для власників VTX із потужністю > 800 мВт та протоколом SmartAudio v1 чи v2.1:  
можете створити/відкоригувати таблицю потужностей (**coded powers**, dBm) так:  
установіть різні рівні потужності кнопкою на VTX, а потім перехопіть відповідь `updateParameters` у **VTX_Test**, щоб дізнатися код потужності або значення dBm для поточного режиму.

> **Підтримка та допомога не надаються.**  
> Використовуйте код на власний ризик.
